{% extends "base.html" %} 
{% load static %}


{% block title %}{{ topic.subject }}{% endblock %}

{% block breadcrumb %}
  <li class="breadcrumb-item"><a href="{% url 'home' %}">Collection</a></li>
  <li class="breadcrumb-item"><a href="{% url 'collection_docs' document.collection.pk %}">{{ document.collection.name }}</a></li>
  <li class="breadcrumb-item active">{{ document.subject }}</li>
{% endblock %}

{% block content %}
<script src="{% static "js/displacy.js" %}"></script>
<script src="{% static "js/jquery.min.js" %}"></script>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        var latlng = new google.maps.LatLng("47.259659", "11.400375");
        var mapOptions = {
            zoom: 15,
            center: latlng,
            mapTypeControl: false,
            navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map($('.map')[0], mapOptions);
    
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            title:"geoLocation"
        });
        
        {% for ent in doc.ents %}
            var geocoder = new google.maps.Geocoder();
            latlng = new google.maps.LatLng("{{ shop.location.y }}", "{{ shop.location.x }}");
            new google.maps.
            new google.maps.Marker({
                position: latlng,
                map: map,
                title:"{{ shop.name }}"
            });
        {% endfor %}
    });
</script>
<div class="map" style="width: auto; height: 400px;"></div>


{% autoescape off %}
{{ html }}
{% endautoescape %}

<script>
  var displacy = new displaCy('{{ processing }}', {
  container: '#displacy',
})

function parse(text) {
  displacy.parse(text)
}
</script>

{% endblock %}
